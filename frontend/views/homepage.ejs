<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Tournaments and Teams</title>
    <link rel="stylesheet" href="/assets/homePage.css">
    <script src="/assets/homepage.js" defer></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-brand">MyWebsite</div>
        <div id="welcome-message"></div>
        <div class="search-profile">
            <form class="search-form" method="GET" action="/api/player/searchTournaments" onsubmit="return preprocessSearchInput()">
                <input type="text" id="search-input" name="searchTerm" placeholder="Search (use '?' for tournaments, '>' for teams)" required aria-label="Search tournaments and teams">
                <button type="submit">Search</button>
            </form>
            <a href="/dashboard">
            <img src="/assets/user.png" alt="Profile" class="profile-pic"></a>
        </div>
    </nav>

    <!-- Main container for the layout -->
    <div class="main-container">
        <!-- Left Column for tournaments -->
        <div class="left-column">
            <div id="joined-tournaments">
                <% if (joinedTournaments.length > 0) { %>
                    <h3>Your Joined Tournaments:</h3>
                    <ul>
                        <% joinedTournaments.forEach(tournament => { %>
                            <li>Tournament ID: <%= tournament._id.toString() %></li>
                        <% }); %>
                    </ul>
                <% } else { %>
                    <p>You have not joined any tournaments.</p>
                <% } %>
            </div>
                    
                    <script>
                        // Optionally, you can show this section after a successful join
                        document.getElementById("loaded-tournament-data").style.display = "block";
                    </script>
                    
            </div>
        </div>
        
        <!-- Right Column for organiser and team results -->
        <div class="right-column">
            <div class="searchResults" id="searchOrg">
                <div class="heading">Organization Results</div>
                <h2>Followed Organisers</h2>
                <div id="followed-organisers">
                    <% if (followedOrganisers.length > 0) { %>
                        <% followedOrganisers.forEach(organiser => { %>
                            <div class="organiser-details">
                                <h3><%= organiser.username %></h3>
                                <p><strong>Email:</strong> <%= organiser.email %></p>
                                <strong>Tournaments Organized:</strong>
                                <ul>
                                    <% if (organiser.tournaments && organiser.tournaments.length > 0) { %>
                                        <% organiser.tournaments.forEach(tournament => { %>
                                            <li>Tournament ID: <%= tournament._id.toString() %></li>
                                        <% }); %>
                                    <% } else { %>
                                        <li>No tournaments organized yet</li>
                                    <% } %>
                                </ul>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <p>No followed organisers.</p>
                    <% } %>
                </div>
                
                </div>
                
                    </div>
                </div>
            </div>

        </div>
    </div>
    
    <script src="/assets/homepage.js"></script>
</body>
</html>
